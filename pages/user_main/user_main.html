<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<title>SHARK</title>
		<link rel="stylesheet" type="text/css" href="user_main.css"/>
		<link rel="stylesheet" type="text/css" href="time.css"/>
		
		<script src="../url_config.js"></script>
		<script src="../vue.js"></script>
		<script src="../jquery.js"></script>
		<script src="../axios.js"></script>
		<script src="../md5.js"></script>
	</head>
	<body>
		
		<div class="left animation_time" id="left_menu">
			<div style="text-align: center; width: inherit;">hello there {{user_name}}!</div>
		</div>
		
		<div class="main_container animation_time">
			<div id="heading" class="bg-gradient" id="heading">
				<div id="user" @click="toggle_left"></div>
				<div id="logo" onclick="location.href='../index/index.html'"></div>
				<div id="search" class="animation_time" @click="toggle_right"></div>
			</div>
			<div class="notification-container animation_time"></div>
			
			<!-- pac-input for google map search box -->
			<input
			      id="pac-input"
			      class="controls"
			      type="text"
			      placeholder="目的地址搜索"
				  style="visibility: hidden;"
			    />
				
			<div class='info_container animation_time'>
				<div class='info_panel animation_time' style="display: none;">
					<button type='button' class='close_panel' onclick='close_panel()'></button>
					<h2 id='loc_name'>公共学院停车场</h2>
					<h3 id='address'>林泉街69号</h3>
					<div class='calendar'>
						<h2 class='time'>
							<input type='number' min='0' max='23' class='hour_start_h hour' oninput='h_check(this)' onchange='set_time()'>:<input type='number' min='0' max='59' class='hour_start_m hour' oninput='m_check(this)' onchange='set_time()'>
							 -
							<input type='number' min='0' max='23' class='hour_end_h hour'   oninput='h_check(this)' onchange='set_time()'>:<input type='number' min='0' max='59' class='hour_end_m hour'   oninput='m_check(this)' onchange='set_time()'>
						</h2>
						<div style='display: flex; width: 25vw; align-items: center;'>
							<input class='date_select start_date' type='date' onchange='set_time()'>
							<input class='date_select end_date' type='date' onchange='set_time()'>
						</div>
						<div class='clock'>
							<div class='hour-24 tick'><span class='hour midnight'></span></div><div class='hour-24 tick'></div><div class='hour-24 tick'></div><div class='hour-24 tick'></div><div class='hour-24 tick'></div><div class='hour-24 tick'></div><div class='hour-24 tick'></div><div class='hour-24 tick'></div><div class='hour-24 tick'></div><div class='hour-24 tick'></div><div class='hour-24 tick'></div><div class='hour-24 tick'></div><div class='hour-24 tick'></div><div class='hour-24 tick'></div><div class='hour-24 tick'></div><div class='hour-24 tick'></div><div class='hour-24 tick'></div><div class='hour-24 tick'></div><div class='hour-24 tick'></div><div class='hour-24 tick'></div><div class='hour-24 tick'></div><div class='hour-24 tick'></div><div class='hour-24 tick'></div><div class='hour-24 tick'></div><div class='hour-24 tick'></div><div class='hour-24 tick'></div><div class='hour-24 tick'></div><div class='hour-24 tick'></div><div class='hour-24 tick'></div><div class='hour-24 tick'></div><div class='hour-1 tick'><span class='hour'>1</span></div><div class='hour-1 tick'></div><div class='hour-1 tick'></div><div class='hour-1 tick'></div><div class='hour-1 tick'></div><div class='hour-1 tick'></div><div class='hour-1 tick'></div><div class='hour-1 tick'></div><div class='hour-1 tick'></div><div class='hour-1 tick'></div><div class='hour-1 tick'></div><div class='hour-1 tick'></div><div class='hour-1 tick'></div><div class='hour-1 tick'></div><div class='hour-1 tick'></div><div class='hour-1 tick'></div><div class='hour-1 tick'></div><div class='hour-1 tick'></div><div class='hour-1 tick'></div><div class='hour-1 tick'></div><div class='hour-1 tick'></div><div class='hour-1 tick'></div><div class='hour-1 tick'></div><div class='hour-1 tick'></div><div class='hour-1 tick'></div><div class='hour-1 tick'></div><div class='hour-1 tick'></div><div class='hour-1 tick'></div><div class='hour-1 tick'></div><div class='hour-1 tick'></div><div class='hour-2 tick'><span class='hour'>2</span></div><div class='hour-2 tick'></div><div class='hour-2 tick'></div><div class='hour-2 tick'></div><div class='hour-2 tick'></div><div class='hour-2 tick'></div><div class='hour-2 tick'></div><div class='hour-2 tick'></div><div class='hour-2 tick'></div><div class='hour-2 tick'></div><div class='hour-2 tick'></div><div class='hour-2 tick'></div><div class='hour-2 tick'></div><div class='hour-2 tick'></div><div class='hour-2 tick'></div><div class='hour-2 tick'></div><div class='hour-2 tick'></div><div class='hour-2 tick'></div><div class='hour-2 tick'></div><div class='hour-2 tick'></div><div class='hour-2 tick'></div><div class='hour-2 tick'></div><div class='hour-2 tick'></div><div class='hour-2 tick'></div><div class='hour-2 tick'></div><div class='hour-2 tick'></div><div class='hour-2 tick'></div><div class='hour-2 tick'></div><div class='hour-2 tick'></div><div class='hour-2 tick'></div><div class='hour-3 tick'><span class='hour'>3</span></div><div class='hour-3 tick'></div><div class='hour-3 tick'></div><div class='hour-3 tick'></div><div class='hour-3 tick'></div><div class='hour-3 tick'></div><div class='hour-3 tick'></div><div class='hour-3 tick'></div><div class='hour-3 tick'></div><div class='hour-3 tick'></div><div class='hour-3 tick'></div><div class='hour-3 tick'></div><div class='hour-3 tick'></div><div class='hour-3 tick'></div><div class='hour-3 tick'></div><div class='hour-3 tick'></div><div class='hour-3 tick'></div><div class='hour-3 tick'></div><div class='hour-3 tick'></div><div class='hour-3 tick'></div><div class='hour-3 tick'></div><div class='hour-3 tick'></div><div class='hour-3 tick'></div><div class='hour-3 tick'></div><div class='hour-3 tick'></div><div class='hour-3 tick'></div><div class='hour-3 tick'></div><div class='hour-3 tick'></div><div class='hour-3 tick'></div><div class='hour-3 tick'></div><div class='hour-4 tick'><span class='hour'>4</span></div><div class='hour-4 tick'></div><div class='hour-4 tick'></div><div class='hour-4 tick'></div><div class='hour-4 tick'></div><div class='hour-4 tick'></div><div class='hour-4 tick'></div><div class='hour-4 tick'></div><div class='hour-4 tick'></div><div class='hour-4 tick'></div><div class='hour-4 tick'></div><div class='hour-4 tick'></div><div class='hour-4 tick'></div><div class='hour-4 tick'></div><div class='hour-4 tick'></div><div class='hour-4 tick'></div><div class='hour-4 tick'></div><div class='hour-4 tick'></div><div class='hour-4 tick'></div><div class='hour-4 tick'></div><div class='hour-4 tick'></div><div class='hour-4 tick'></div><div class='hour-4 tick'></div><div class='hour-4 tick'></div><div class='hour-4 tick'></div><div class='hour-4 tick'></div><div class='hour-4 tick'></div><div class='hour-4 tick'></div><div class='hour-4 tick'></div><div class='hour-4 tick'></div><div class='hour-5 tick'><span class='hour'>5</span></div><div class='hour-5 tick'></div><div class='hour-5 tick'></div><div class='hour-5 tick'></div><div class='hour-5 tick'></div><div class='hour-5 tick'></div><div class='hour-5 tick'></div><div class='hour-5 tick'></div><div class='hour-5 tick'></div><div class='hour-5 tick'></div><div class='hour-5 tick'></div><div class='hour-5 tick'></div><div class='hour-5 tick'></div><div class='hour-5 tick'></div><div class='hour-5 tick'></div><div class='hour-5 tick'></div><div class='hour-5 tick'></div><div class='hour-5 tick'></div><div class='hour-5 tick'></div><div class='hour-5 tick'></div><div class='hour-5 tick'></div><div class='hour-5 tick'></div><div class='hour-5 tick'></div><div class='hour-5 tick'></div><div class='hour-5 tick'></div><div class='hour-5 tick'></div><div class='hour-5 tick'></div><div class='hour-5 tick'></div><div class='hour-5 tick'></div><div class='hour-5 tick'></div><div class='hour-6 tick'><span class='hour'>6</span></div><div class='hour-6 tick'></div><div class='hour-6 tick'></div><div class='hour-6 tick'></div><div class='hour-6 tick'></div><div class='hour-6 tick'></div><div class='hour-6 tick'></div><div class='hour-6 tick'></div><div class='hour-6 tick'></div><div class='hour-6 tick'></div><div class='hour-6 tick'></div><div class='hour-6 tick'></div><div class='hour-6 tick'></div><div class='hour-6 tick'></div><div class='hour-6 tick'></div><div class='hour-6 tick'></div><div class='hour-6 tick'></div><div class='hour-6 tick'></div><div class='hour-6 tick'></div><div class='hour-6 tick'></div><div class='hour-6 tick'></div><div class='hour-6 tick'></div><div class='hour-6 tick'></div><div class='hour-6 tick'></div><div class='hour-6 tick'></div><div class='hour-6 tick'></div><div class='hour-6 tick'></div><div class='hour-6 tick'></div><div class='hour-6 tick'></div><div class='hour-6 tick'></div><div class='hour-7 tick'><span class='hour'>7</span></div><div class='hour-7 tick'></div><div class='hour-7 tick'></div><div class='hour-7 tick'></div><div class='hour-7 tick'></div><div class='hour-7 tick'></div><div class='hour-7 tick'></div><div class='hour-7 tick'></div><div class='hour-7 tick'></div><div class='hour-7 tick'></div><div class='hour-7 tick'></div><div class='hour-7 tick'></div><div class='hour-7 tick'></div><div class='hour-7 tick'></div><div class='hour-7 tick'></div><div class='hour-7 tick'></div><div class='hour-7 tick'></div><div class='hour-7 tick'></div><div class='hour-7 tick'></div><div class='hour-7 tick'></div><div class='hour-7 tick'></div><div class='hour-7 tick'></div><div class='hour-7 tick'></div><div class='hour-7 tick'></div><div class='hour-7 tick'></div><div class='hour-7 tick'></div><div class='hour-7 tick'></div><div class='hour-7 tick'></div><div class='hour-7 tick'></div><div class='hour-7 tick'></div><div class='hour-8 tick'><span class='hour'>8</span></div><div class='hour-8 tick'></div><div class='hour-8 tick'></div><div class='hour-8 tick'></div><div class='hour-8 tick'></div><div class='hour-8 tick'></div><div class='hour-8 tick'></div><div class='hour-8 tick'></div><div class='hour-8 tick'></div><div class='hour-8 tick'></div><div class='hour-8 tick'></div><div class='hour-8 tick'></div><div class='hour-8 tick'></div><div class='hour-8 tick'></div><div class='hour-8 tick'></div><div class='hour-8 tick'></div><div class='hour-8 tick'></div><div class='hour-8 tick'></div><div class='hour-8 tick'></div><div class='hour-8 tick'></div><div class='hour-8 tick'></div><div class='hour-8 tick'></div><div class='hour-8 tick'></div><div class='hour-8 tick'></div><div class='hour-8 tick'></div><div class='hour-8 tick'></div><div class='hour-8 tick'></div><div class='hour-8 tick'></div><div class='hour-8 tick'></div><div class='hour-8 tick'></div><div class='hour-9 tick'><span class='hour'>9</span></div><div class='hour-9 tick'></div><div class='hour-9 tick'></div><div class='hour-9 tick'></div><div class='hour-9 tick'></div><div class='hour-9 tick'></div><div class='hour-9 tick'></div><div class='hour-9 tick'></div><div class='hour-9 tick'></div><div class='hour-9 tick'></div><div class='hour-9 tick'></div><div class='hour-9 tick'></div><div class='hour-9 tick'></div><div class='hour-9 tick'></div><div class='hour-9 tick'></div><div class='hour-9 tick'></div><div class='hour-9 tick'></div><div class='hour-9 tick'></div><div class='hour-9 tick'></div><div class='hour-9 tick'></div><div class='hour-9 tick'></div><div class='hour-9 tick'></div><div class='hour-9 tick'></div><div class='hour-9 tick'></div><div class='hour-9 tick'></div><div class='hour-9 tick'></div><div class='hour-9 tick'></div><div class='hour-9 tick'></div><div class='hour-9 tick'></div><div class='hour-9 tick'></div><div class='hour-10 tick'><span class='hour'>10</span></div><div class='hour-10 tick'></div><div class='hour-10 tick'></div><div class='hour-10 tick'></div><div class='hour-10 tick'></div><div class='hour-10 tick'></div><div class='hour-10 tick'></div><div class='hour-10 tick'></div><div class='hour-10 tick'></div><div class='hour-10 tick'></div><div class='hour-10 tick'></div><div class='hour-10 tick'></div><div class='hour-10 tick'></div><div class='hour-10 tick'></div><div class='hour-10 tick'></div><div class='hour-10 tick'></div><div class='hour-10 tick'></div><div class='hour-10 tick'></div><div class='hour-10 tick'></div><div class='hour-10 tick'></div><div class='hour-10 tick'></div><div class='hour-10 tick'></div><div class='hour-10 tick'></div><div class='hour-10 tick'></div><div class='hour-10 tick'></div><div class='hour-10 tick'></div><div class='hour-10 tick'></div><div class='hour-10 tick'></div><div class='hour-10 tick'></div><div class='hour-10 tick'></div><div class='hour-11 tick'><span class='hour'>11</span></div><div class='hour-11 tick'></div><div class='hour-11 tick'></div><div class='hour-11 tick'></div><div class='hour-11 tick'></div><div class='hour-11 tick'></div><div class='hour-11 tick'></div><div class='hour-11 tick'></div><div class='hour-11 tick'></div><div class='hour-11 tick'></div><div class='hour-11 tick'></div><div class='hour-11 tick'></div><div class='hour-11 tick'></div><div class='hour-11 tick'></div><div class='hour-11 tick'></div><div class='hour-11 tick'></div><div class='hour-11 tick'></div><div class='hour-11 tick'></div><div class='hour-11 tick'></div><div class='hour-11 tick'></div><div class='hour-11 tick'></div><div class='hour-11 tick'></div><div class='hour-11 tick'></div><div class='hour-11 tick'></div><div class='hour-11 tick'></div><div class='hour-11 tick'></div><div class='hour-11 tick'></div><div class='hour-11 tick'></div><div class='hour-11 tick'></div><div class='hour-11 tick'></div><div class='hour-12 tick'><span class='hour noon'></span></div><div class='hour-12 tick'></div><div class='hour-12 tick'></div><div class='hour-12 tick'></div><div class='hour-12 tick'></div><div class='hour-12 tick'></div><div class='hour-12 tick'></div><div class='hour-12 tick'></div><div class='hour-12 tick'></div><div class='hour-12 tick'></div><div class='hour-12 tick'></div><div class='hour-12 tick'></div><div class='hour-12 tick'></div><div class='hour-12 tick'></div><div class='hour-12 tick'></div><div class='hour-12 tick'></div><div class='hour-12 tick'></div><div class='hour-12 tick'></div><div class='hour-12 tick'></div><div class='hour-12 tick'></div><div class='hour-12 tick'></div><div class='hour-12 tick'></div><div class='hour-12 tick'></div><div class='hour-12 tick'></div><div class='hour-12 tick'></div><div class='hour-12 tick'></div><div class='hour-12 tick'></div><div class='hour-12 tick'></div><div class='hour-12 tick'></div><div class='hour-12 tick'></div><div class='hour-13 tick'><span class='hour'>13</span></div><div class='hour-13 tick'></div><div class='hour-13 tick'></div><div class='hour-13 tick'></div><div class='hour-13 tick'></div><div class='hour-13 tick'></div><div class='hour-13 tick'></div><div class='hour-13 tick'></div><div class='hour-13 tick'></div><div class='hour-13 tick'></div><div class='hour-13 tick'></div><div class='hour-13 tick'></div><div class='hour-13 tick'></div><div class='hour-13 tick'></div><div class='hour-13 tick'></div><div class='hour-13 tick'></div><div class='hour-13 tick'></div><div class='hour-13 tick'></div><div class='hour-13 tick'></div><div class='hour-13 tick'></div><div class='hour-13 tick'></div><div class='hour-13 tick'></div><div class='hour-13 tick'></div><div class='hour-13 tick'></div><div class='hour-13 tick'></div><div class='hour-13 tick'></div><div class='hour-13 tick'></div><div class='hour-13 tick'></div><div class='hour-13 tick'></div><div class='hour-13 tick'></div><div class='hour-14 tick'><span class='hour'>14</span></div><div class='hour-14 tick'></div><div class='hour-14 tick'></div><div class='hour-14 tick'></div><div class='hour-14 tick'></div><div class='hour-14 tick'></div><div class='hour-14 tick'></div><div class='hour-14 tick'></div><div class='hour-14 tick'></div><div class='hour-14 tick'></div><div class='hour-14 tick'></div><div class='hour-14 tick'></div><div class='hour-14 tick'></div><div class='hour-14 tick'></div><div class='hour-14 tick'></div><div class='hour-14 tick'></div><div class='hour-14 tick'></div><div class='hour-14 tick'></div><div class='hour-14 tick'></div><div class='hour-14 tick'></div><div class='hour-14 tick'></div><div class='hour-14 tick'></div><div class='hour-14 tick'></div><div class='hour-14 tick'></div><div class='hour-14 tick'></div><div class='hour-14 tick'></div><div class='hour-14 tick'></div><div class='hour-14 tick'></div><div class='hour-14 tick'></div><div class='hour-14 tick'></div><div class='hour-15 tick'><span class='hour'>15</span></div><div class='hour-15 tick'></div><div class='hour-15 tick'></div><div class='hour-15 tick'></div><div class='hour-15 tick'></div><div class='hour-15 tick'></div><div class='hour-15 tick'></div><div class='hour-15 tick'></div><div class='hour-15 tick'></div><div class='hour-15 tick'></div><div class='hour-15 tick'></div><div class='hour-15 tick'></div><div class='hour-15 tick'></div><div class='hour-15 tick'></div><div class='hour-15 tick'></div><div class='hour-15 tick'></div><div class='hour-15 tick'></div><div class='hour-15 tick'></div><div class='hour-15 tick'></div><div class='hour-15 tick'></div><div class='hour-15 tick'></div><div class='hour-15 tick'></div><div class='hour-15 tick'></div><div class='hour-15 tick'></div><div class='hour-15 tick'></div><div class='hour-15 tick'></div><div class='hour-15 tick'></div><div class='hour-15 tick'></div><div class='hour-15 tick'></div><div class='hour-15 tick'></div><div class='hour-16 tick'><span class='hour'>16</span></div><div class='hour-16 tick'></div><div class='hour-16 tick'></div><div class='hour-16 tick'></div><div class='hour-16 tick'></div><div class='hour-16 tick'></div><div class='hour-16 tick'></div><div class='hour-16 tick'></div><div class='hour-16 tick'></div><div class='hour-16 tick'></div><div class='hour-16 tick'></div><div class='hour-16 tick'></div><div class='hour-16 tick'></div><div class='hour-16 tick'></div><div class='hour-16 tick'></div><div class='hour-16 tick'></div><div class='hour-16 tick'></div><div class='hour-16 tick'></div><div class='hour-16 tick'></div><div class='hour-16 tick'></div><div class='hour-16 tick'></div><div class='hour-16 tick'></div><div class='hour-16 tick'></div><div class='hour-16 tick'></div><div class='hour-16 tick'></div><div class='hour-16 tick'></div><div class='hour-16 tick'></div><div class='hour-16 tick'></div><div class='hour-16 tick'></div><div class='hour-16 tick'></div><div class='hour-17 tick'><span class='hour'>17</span></div><div class='hour-17 tick'></div><div class='hour-17 tick'></div><div class='hour-17 tick'></div><div class='hour-17 tick'></div><div class='hour-17 tick'></div><div class='hour-17 tick'></div><div class='hour-17 tick'></div><div class='hour-17 tick'></div><div class='hour-17 tick'></div><div class='hour-17 tick'></div><div class='hour-17 tick'></div><div class='hour-17 tick'></div><div class='hour-17 tick'></div><div class='hour-17 tick'></div><div class='hour-17 tick'></div><div class='hour-17 tick'></div><div class='hour-17 tick'></div><div class='hour-17 tick'></div><div class='hour-17 tick'></div><div class='hour-17 tick'></div><div class='hour-17 tick'></div><div class='hour-17 tick'></div><div class='hour-17 tick'></div><div class='hour-17 tick'></div><div class='hour-17 tick'></div><div class='hour-17 tick'></div><div class='hour-17 tick'></div><div class='hour-17 tick'></div><div class='hour-17 tick'></div><div class='hour-18 tick'><span class='hour'>18</span></div><div class='hour-18 tick'></div><div class='hour-18 tick'></div><div class='hour-18 tick'></div><div class='hour-18 tick'></div><div class='hour-18 tick'></div><div class='hour-18 tick'></div><div class='hour-18 tick'></div><div class='hour-18 tick'></div><div class='hour-18 tick'></div><div class='hour-18 tick'></div><div class='hour-18 tick'></div><div class='hour-18 tick'></div><div class='hour-18 tick'></div><div class='hour-18 tick'></div><div class='hour-18 tick'></div><div class='hour-18 tick'></div><div class='hour-18 tick'></div><div class='hour-18 tick'></div><div class='hour-18 tick'></div><div class='hour-18 tick'></div><div class='hour-18 tick'></div><div class='hour-18 tick'></div><div class='hour-18 tick'></div><div class='hour-18 tick'></div><div class='hour-18 tick'></div><div class='hour-18 tick'></div><div class='hour-18 tick'></div><div class='hour-18 tick'></div><div class='hour-18 tick'></div><div class='hour-19 tick'><span class='hour'>19</span></div><div class='hour-19 tick'></div><div class='hour-19 tick'></div><div class='hour-19 tick'></div><div class='hour-19 tick'></div><div class='hour-19 tick'></div><div class='hour-19 tick'></div><div class='hour-19 tick'></div><div class='hour-19 tick'></div><div class='hour-19 tick'></div><div class='hour-19 tick'></div><div class='hour-19 tick'></div><div class='hour-19 tick'></div><div class='hour-19 tick'></div><div class='hour-19 tick'></div><div class='hour-19 tick'></div><div class='hour-19 tick'></div><div class='hour-19 tick'></div><div class='hour-19 tick'></div><div class='hour-19 tick'></div><div class='hour-19 tick'></div><div class='hour-19 tick'></div><div class='hour-19 tick'></div><div class='hour-19 tick'></div><div class='hour-19 tick'></div><div class='hour-19 tick'></div><div class='hour-19 tick'></div><div class='hour-19 tick'></div><div class='hour-19 tick'></div><div class='hour-19 tick'></div><div class='hour-20 tick'><span class='hour'>20</span></div><div class='hour-20 tick'></div><div class='hour-20 tick'></div><div class='hour-20 tick'></div><div class='hour-20 tick'></div><div class='hour-20 tick'></div><div class='hour-20 tick'></div><div class='hour-20 tick'></div><div class='hour-20 tick'></div><div class='hour-20 tick'></div><div class='hour-20 tick'></div><div class='hour-20 tick'></div><div class='hour-20 tick'></div><div class='hour-20 tick'></div><div class='hour-20 tick'></div><div class='hour-20 tick'></div><div class='hour-20 tick'></div><div class='hour-20 tick'></div><div class='hour-20 tick'></div><div class='hour-20 tick'></div><div class='hour-20 tick'></div><div class='hour-20 tick'></div><div class='hour-20 tick'></div><div class='hour-20 tick'></div><div class='hour-20 tick'></div><div class='hour-20 tick'></div><div class='hour-20 tick'></div><div class='hour-20 tick'></div><div class='hour-20 tick'></div><div class='hour-20 tick'></div><div class='hour-21 tick'><span class='hour'>21</span></div><div class='hour-21 tick'></div><div class='hour-21 tick'></div><div class='hour-21 tick'></div><div class='hour-21 tick'></div><div class='hour-21 tick'></div><div class='hour-21 tick'></div><div class='hour-21 tick'></div><div class='hour-21 tick'></div><div class='hour-21 tick'></div><div class='hour-21 tick'></div><div class='hour-21 tick'></div><div class='hour-21 tick'></div><div class='hour-21 tick'></div><div class='hour-21 tick'></div><div class='hour-21 tick'></div><div class='hour-21 tick'></div><div class='hour-21 tick'></div><div class='hour-21 tick'></div><div class='hour-21 tick'></div><div class='hour-21 tick'></div><div class='hour-21 tick'></div><div class='hour-21 tick'></div><div class='hour-21 tick'></div><div class='hour-21 tick'></div><div class='hour-21 tick'></div><div class='hour-21 tick'></div><div class='hour-21 tick'></div><div class='hour-21 tick'></div><div class='hour-21 tick'></div><div class='hour-22 tick'><span class='hour'>22</span></div><div class='hour-22 tick'></div><div class='hour-22 tick'></div><div class='hour-22 tick'></div><div class='hour-22 tick'></div><div class='hour-22 tick'></div><div class='hour-22 tick'></div><div class='hour-22 tick'></div><div class='hour-22 tick'></div><div class='hour-22 tick'></div><div class='hour-22 tick'></div><div class='hour-22 tick'></div><div class='hour-22 tick'></div><div class='hour-22 tick'></div><div class='hour-22 tick'></div><div class='hour-22 tick'></div><div class='hour-22 tick'></div><div class='hour-22 tick'></div><div class='hour-22 tick'></div><div class='hour-22 tick'></div><div class='hour-22 tick'></div><div class='hour-22 tick'></div><div class='hour-22 tick'></div><div class='hour-22 tick'></div><div class='hour-22 tick'></div><div class='hour-22 tick'></div><div class='hour-22 tick'></div><div class='hour-22 tick'></div><div class='hour-22 tick'></div><div class='hour-22 tick'></div><div class='hour-23 tick'><span class='hour'>23</span></div><div class='hour-23 tick'></div><div class='hour-23 tick'></div><div class='hour-23 tick'></div><div class='hour-23 tick'></div><div class='hour-23 tick'></div><div class='hour-23 tick'></div><div class='hour-23 tick'></div><div class='hour-23 tick'></div><div class='hour-23 tick'></div><div class='hour-23 tick'></div><div class='hour-23 tick'></div><div class='hour-23 tick'></div><div class='hour-23 tick'></div><div class='hour-23 tick'></div><div class='hour-23 tick'></div><div class='hour-23 tick'></div><div class='hour-23 tick'></div><div class='hour-23 tick'></div><div class='hour-23 tick'></div><div class='hour-23 tick'></div><div class='hour-23 tick'></div><div class='hour-23 tick'></div><div class='hour-23 tick'></div><div class='hour-23 tick'></div><div class='hour-23 tick'></div><div class='hour-23 tick'></div><div class='hour-23 tick'></div><div class='hour-23 tick'></div><div class='hour-23 tick'></div><div class='center'></div>
						</div>
						<button class='button'>预定</button>
					</div>
				</div>
			</div>
			
			<div id="map"></div>
		</div>

		<div class="right animation_time" id="sidebar">
			<div id="search-area">
				<input type="text" type="text" placeholder="车位名搜索" required>
				<button type="button">搜索</button>
			</div>
			
			<div id="results-area">
				<ul> 
				<!-- TODO get uuid and basic info from backend -->
					<li id='4eb85e7c-81a5-4b74-9c42-b0c09c07a12c' onclick="info(this)">
					  <p class="p-name">公用学院苏州工业园区218号如果地址很长会不会溢出</p>
								<div class="row">
									<div class="location_icons"></div>
									<div class="content">苏州工业园区218号如果地址很长会不会溢出</div>
								</div>
								<div class="row">
									<div class="status_icons"></div>
									<div class="content">个人</div>
								</div>
								<div class="row">
									<div class="distance_icons"></div>
									<div class="content">69 KM</div>
								</div>
					</li>
					<li onclick="info(this)">
					  <p class="p-name">文萃广场</p>
								<div class="row">
									<div class="location_icons"></div>
									<div class="content">苏州工业园区218号如果地址很长会不会溢出</div>
								</div>
								<div class="row">
									<div class="status_icons"></div>
									<div class="content">物业</div>
								</div>
								<div class="row">
									<div class="distance_icons"></div>
									<div class="content">69 km</div>
								</div>
					</li>
					<li onclick="info(this)">
					  <p class="p-name">NUSRI</p>
								<div class="row">
									<div class="location_icons"></div>
									<div class="content">苏州工业园区218号如果地址很长会不会溢出</div>
								</div>
								<div class="row">
									<div class="status_icons"></div>
									<div class="content">物业</div>
								</div>
								<div class="row">
									<div class="distance_icons"></div>
									<div class="content">69 km</div>
								</div>
					</li>
					<li onclick="info(this)">
					  <p class="p-name">公用学院苏州工业园区218号如果地址很长会不会溢出</p>
								<div class="row">
									<div class="location_icons"></div>
									<div class="content">苏州工业园区218号如果地址很长会不会溢出</div>
								</div>
								<div class="row">
									<div class="status_icons"></div>
									<div class="content">个人</div>
								</div>
								<div class="row">
									<div class="distance_icons"></div>
									<div class="content">69 km</div>
								</div>
					</li>
					<li onclick="info(this)">
					  <p class="p-name">文萃广场</p>
								<div class="row">
									<div class="location_icons"></div>
									<div class="content">苏州工业园区218号如果地址很长会不会溢出</div>
								</div>
								<div class="row">
									<div class="status_icons"></div>
									<div class="content">物业</div>
								</div>
								<div class="row">
									<div class="distance_icons"></div>
									<div class="content">69 km</div>
								</div>
					</li>
					<li onclick="info(this)">
					  <p class="p-name">NUSRI</p>
								<div class="row">
									<div class="location_icons"></div>
									<div class="content">苏州工业园区218号如果地址很长会不会溢出</div>
								</div>
								<div class="row">
									<div class="status_icons"></div>
									<div class="content">物业</div>
								</div>
								<div class="row">
									<div class="distance_icons"></div>
									<div class="content">69 km</div>
								</div>
					</li>
					<li onclick="info(this)">
					  <p class="p-name">公用学院苏州工业园区218号如果地址很长会不会溢出</p>
								<div class="row">
									<div class="location_icons"></div>
									<div class="content">苏州工业园区218号如果地址很长会不会溢出</div>
								</div>
								<div class="row">
									<div class="status_icons"></div>
									<div class="content">个人</div>
								</div>
								<div class="row">
									<div class="distance_icons"></div>
									<div class="content">69 km</div>
								</div>
					</li>
					<li style="opacity: 0;">
					</li>
				</ul>
			</div>
		</div>
		<!-- <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyBP7804kZZ1Gttz29wYqTWkdESYR2-az_0"></script> -->
		<script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyBP7804kZZ1Gttz29wYqTWkdESYR2-az_0&libraries=places"></script>
	</body>

<!-- script section -->
<script type="text/javascript">
// configure Vue
Vue.config.productionTip = false;
// configure baseURL
axios.defaults.baseURL = BaseURL;
// get notification section
notification = document.getElementsByClassName("notification-container")[0];
// left right sidebar logic
var l_status = false;
var r_status = false;
new Vue({
	el: "#heading",
	data:{
	},
	methods:{
		toggle_left(){
			if(r_status && !l_status){
				this.toggle_right();
			}
			l_status = !l_status;
			$('.left').toggleClass('expanded');
			$('.main_container').toggleClass('main_container_retracted');
		},
		toggle_right(){
			if(l_status){
				this.toggle_left();
			}
			r_status = !r_status;
			$('#search').toggleClass('icon_to_left');
			$('.right').toggleClass('expanded');
			if(r_status){
				$('#pac-input')[0].style.marginLeft = '30vw';
				$('.notification-container')[0].style.marginRight = '20vw';
				$('.info_container')[0].style.marginRight = '20vw';
			}
			else{
				$('#pac-input')[0].style.marginLeft = '40vw';
				$('.notification-container')[0].style.marginRight = '';
				$('.info_container')[0].style.marginRight = '';
			}	
		}
	}
});

// google map
// TODO TODO TODO

// // custom icon pic and resize
// var icon = {
//     url: "../index_pic/parking.png", // url
//     scaledSize: new google.maps.Size(46, 46), // scaled size
//     origin: new google.maps.Point(0,0), // origin
//     anchor: new google.maps.Point(0, 0) // anchor
// };
// // info display when click marker icon
// var infowindow = new google.maps.InfoWindow({
//                 content: "Add your popup content here"
// });
// // create marker instance on map
// var marker = new google.maps.Marker({
// 	// float number, parseFloat(sessionStorage.getItem('lat/lng'))
//     position: {lat: 120, lng: 120},
//     map,
//     icon: icon
//   });
// //  add infowindow to marker
// marker.addListener('click', function() {
//           infowindow.open(map, marker);
// });

//  temp info invoker
var active_li;
function info(self){
	if(active_li == self){
		close_panel();
		return;
	}
	if(active_li != null){
		close_panel();
	}
	// TODO TODO change content dynamically with returned list
	$('.info_panel')[0].style.display = 'flex';
	var today = new Date().toISOString().split('T')[0];
	document.getElementsByClassName("start_date")[0].setAttribute('min', today);
	document.getElementsByClassName("end_date")[0].setAttribute('min', today);
	active_li = self;
	self.style.boxShadow = "0 4px 4px rgb(0 0 0 / 40%), 0 -1px 0 rgb(0 0 0 / 2%)";
	self.style.background = "rgba(200,200,200, 0.9)";
}
// close information panel
function close_panel(){
	$('.info_panel')[0].style.display = 'none';
	if(active_li){
		active_li.style.boxShadow = "";
		active_li.style.background = "";
	}
	active_li = null;
}

var map;
function initMap(){
	if (navigator.geolocation) {
		// TODO swap in production
		map = new google.maps.Map(document.getElementById("map"), {
		    center: { lat: 0, lng: 0 },
		    zoom: 13,
			disableDefaultUI: true
		  });
		
		navigator.geolocation.getCurrentPosition(
			function (position) {
				map.setCenter({lat: position.coords.latitude, lng: position.coords.longitude});
			}
		);
		
		// Create the search box and link it to the UI element.
		const input = document.getElementById("pac-input");
		const searchBox = new google.maps.places.SearchBox(input);
		
		map.controls[google.maps.ControlPosition.TOP_LEFT].push(input);
		// Bias the SearchBox results towards current map's viewport.
		map.addListener("bounds_changed", () => {
		  searchBox.setBounds(map.getBounds());
		});
		
		let markers = [];
		
		// Listen for the event fired when the user selects a prediction and retrieve
		// more details for that place.
		// !!search and refocus event!!
		searchBox.addListener("places_changed", () => {
		  const places = searchBox.getPlaces();
		
		  if (places.length == 0) {
		    return;
		  }
		
		  // Clear out the old markers.
		  markers.forEach((marker) => {
		    marker.setMap(null);
		  });
		  markers = [];
		
		  // For each place, get the icon, name and location.
		  const bounds = new google.maps.LatLngBounds();
		
		  places.forEach((place) => {
		    if (!place.geometry || !place.geometry.location) {
		      console.log("Returned place contains no geometry");
		      return;
		    }
		
		    const icon = {
		      url: place.icon,
		      size: new google.maps.Size(71, 71),
		      origin: new google.maps.Point(0, 0),
		      anchor: new google.maps.Point(17, 34),
		      scaledSize: new google.maps.Size(25, 25),
		    };
		
		    // Create a marker for each place.
		    markers.push(
		      new google.maps.Marker({
		        map,
		        icon,
		        title: place.name,
		        position: place.geometry.location,
		      })
		    );
			
			// get lat and lng for searched location
			sessionStorage.setItem('lat', place.geometry.location.lat());
			sessionStorage.setItem('lng', place.geometry.location.lng());
			
		    if (place.geometry.viewport) {
		      // Only geocodes have viewport.
		      bounds.union(place.geometry.viewport);
		    } else {
		      bounds.extend(place.geometry.location);
		    }
		  });
		  map.fitBounds(bounds);
		});
		success('Map load success.');
	} 
	else{
		error('Unable to get location.');
	}
}

function success(success_message){
	notification.innerHTML = '<div class="rectangle" id="success" style="display: flex; position: absolute;">'
								+'<div class="notification-text">'
									+'<span>&nbsp;&nbsp;'+success_message+'</span>'
								+'</div>'
							+'</div>';
}

function error(error_message){
	notification.innerHTML = '<div class="rectangle" id="error" style="display: flex; position: absolute;">'
								+'<div class="notification-text">'
									+'<span>&nbsp;&nbsp;'+error_message+'</span>'
								+'</div>'
							+'</div>';
}

// TODO initiate map in production
// initMap();

new Vue({
	el: "#left_menu",
	data:{
		user_name : sessionStorage.getItem('user_name')
	},
	methods:{
		
	}
});

new Vue({
	el: "#sidebar",
	data:{
	},
	methods:{
	}
});


// time scheduler

var appointments = [
// array item 0 reserved for all time before current time
	[],
	['21:00', '23:30']
];
var new_appointment_duration = 60;

var sh;
var sm;
var eh;
var em;
var sd;
var ed;
var $centerElement;
var is_moving_appointment;
var curent_time_position;
var date_validity = true;
  
var d = new Date();
var new_appointment_time_start = d.getHours()+":"+d.getMinutes();

  var transformed_appointments = [];
  
  function durationtodeg(duration) {
    return Math.floor(duration/2);
  }
  
  function timetodeg(time) {
    var hour_parts = time.split(":");
    return Math.floor(((hour_parts[0] * 30)-1) + ((hour_parts[1]/2)-1));
  }
  
  function pad(n, width, z) {
    z = z || '0';
    n = n + '';
    return n.length >= width ? n : new Array(width - n.length + 1).join(z) + n;
  }
  
  function transformAppointment(appointment) {
    var start_deg = timetodeg(appointment[0]);
    var end_deg = timetodeg(appointment[1])+1;
    var deg_duration = end_deg - start_deg;
    return [start_deg, deg_duration];
  }
  
  function showAppointments() {
    for(i in appointments) {
      var transformed_appointment = transformAppointment(appointments[i]);
        transformed_appointments.push(transformed_appointment);
    }
    
    $("div.clock > div.tick").addClass('free');
    $("div.clock > div.tick").removeClass('taken');
    
    for(i in transformed_appointments) {
      var st = transformed_appointments[i][0];
      var length = transformed_appointments[i][1];
      
      if(st > 720) {
        st = st - 720; 
      }
      
      var selector = "div.clock div.tick:gt(" + st + "):lt(" + length + ")";
      var selector_size = $(selector).length;
      if(selector_size < length) {
        selector += ", div.clock div.tick:lt(" + (length-selector_size) + ")";
      }
      $(selector).removeClass('free');
      $(selector).addClass('taken');
      
    }
  }
  
  function setCurentTime(){
    var d = new Date();
    var curent_hour = d.getHours();
    var curent_minute = d.getMinutes();
	appointments[0] = ['00:00', curent_hour+':'+curent_minute]
  }
  

  function getTimeBasedOnMousPosition(e) {
    if(is_moving_appointment){
      var p2 = {
        x: $centerElement.offset().left,
        y: $centerElement.offset().top
      };
      var p1 = {
        x: e.pageX || e.originalEvent.touches[0].pageX,
        y: e.pageY || e.originalEvent.touches[0].pageY
      }
      var angleDeg = (Math.atan2(p1.y - p2.y, p1.x - p2.x) * 180 / Math.PI) + 90;
      if (angleDeg < 0) angleDeg = 360 + angleDeg;
      curent_time_position = Math.floor(angleDeg*2);
    }
  }
  
  function renderSelectedTimeBlock(force) {
    force = force || false;
    if(is_moving_appointment || force) {
      var length = durationtodeg(new_appointment_duration);
      var st = curent_time_position;
      var selector = "div.clock div.tick:gt(" + curent_time_position + "):lt(" + length + ")";
      var negative_selector = "div.clock div.tick:not(:gt(" + st + "):lt(" + length + "))";
      var selector_size = $(selector).length;
      if(selector_size < length) {
        selector += ", div.clock div.tick:lt(" + (length-selector_size) + ")";
        negative_selector += ", div.clock div.tick:not(:lt(" + (length-selector_size) + "))";
      }
      $("div.clock div.tick").removeClass('selected');
      $(selector).addClass('selected');
      
	  // render caused by mouse select
	  if(!force){
		var curentHour = Math.floor((curent_time_position+2) / 30);
		if(curentHour == 0) curentHour = 0;
		var minutesDeg = (curent_time_position+2) % 30;
		var curentMinute = minutesDeg * 2;
		if(curentHour>=24) curentHour -= 24;
		sh.value = pad(curentHour,2,'0');
		sm.value = pad(curentMinute, 2, '0');
		var end_time_position = curent_time_position + durationtodeg(new_appointment_duration);
		var end_time_hour = Math.floor((end_time_position+2) / 30);
		if(end_time_hour >= 24) end_time_hour -= 24;
		var end_time_minute = ((end_time_position+2) % 30)*2;
		eh.value = pad(end_time_hour,2,'0');
		em.value = pad(end_time_minute, 2, '0');
		set_time();
	  }
    }
  }
  
  // TODO TODO needs further improvement
  function set_time(){
	  date_validity = true;
	  date_valid_color();
	  var start_hour = parseInt(sh.value); 
	  var start_minute = parseInt(sm.value);
	  var end_hour = parseInt(eh.value);
	  var end_minute = parseInt(em.value);
	  
	  if(sd.value > ed.value){
		  date_invalid_color();
		  date_validity = false;
		  return;
	  }
	  
	  if(sd.value == ed.value){
		  if(start_hour > end_hour){
			  date_invalid_color();
			  date_validity = false;
			  return;
		  }
		  if(start_hour == end_hour){
			  if(start_minute >= end_minute){
				  date_invalid_color();
				  date_validity = false;
				  return;
			  }
		  }
		  
		  if((start_hour*60+start_minute)+10 > (end_hour*60+end_minute)){
			  error('预定时间最少10分钟');
			  date_invalid_color();
			  date_validity = false;
			  new_appointment_duration = 0;
		  }
		  else{
			  curent_time_position = timetodeg(start_hour+":"+start_minute);
			  new_appointment_duration = (end_hour-start_hour)*60 + end_minute-start_minute;
		  }
		  renderSelectedTimeBlock(true);
		  for(i=0; i<720; i++) $('.tick')[i].style.backgroundColor = '';
		  $("div.clock").on('mousedown touchstart', function(e) {
		    is_moving_appointment = true;
		  });
	  }
	  else{
		  for(i=0; i<720; i++) $('.tick')[i].style.backgroundColor = 'grey';
		  $("div.clock").on('mousedown touchstart', function(e) {
		    is_moving_appointment = false;
		  });
	  }
  }
  
  function date_invalid_color(){
	  sd.style.color = '#ED5565';
	  ed.style.color = '#ED5565';
	  sh.style.color = '#ED5565';
	  sm.style.color = '#ED5565';
	  eh.style.color = '#ED5565';
	  em.style.color = '#ED5565';
  }
  
  function date_valid_color(){
	  sd.style.color = '#304f8d';
	  ed.style.color = '#304f8d';
	  sh.style.color = '#304f8d';
	  sm.style.color = '#304f8d';
	  eh.style.color = '#304f8d';
	  em.style.color = '#304f8d';
  }
  
  function init(){
	  
	  sh = $("h2.time > input.hour_start_h")[0];
	  sm = $("h2.time > input.hour_start_m")[0];
	  eh = $("h2.time > input.hour_end_h")[0];
	  em = $("h2.time > input.hour_end_m")[0];
	  sd = $(".start_date")[0];
	  ed = $(".end_date")[0];
	  $centerElement = $("div.center:eq(0)");
	  is_moving_appointment = false;
	  curent_time_position = timetodeg(new_appointment_time_start);
	  
		setCurentTime();
		showAppointments();
	    setInterval(setCurentTime, 10000);
		setInterval(showAppointments, 10000);
		is_moving_appointment = true;
	    renderSelectedTimeBlock();
	    is_moving_appointment = false;
	    
	    $(window).on('mousemove touchmove', function(e){
	      getTimeBasedOnMousPosition(e);
	      renderSelectedTimeBlock();
	    });
	    
	    $("div.clock").on('mousedown touchstart', function(e) {
	      is_moving_appointment = true;
	    });
	    
	    $(window).on('mouseup touchend', function() {
	      is_moving_appointment = false;
	    })
  }

function h_check(self){
	self.value = Math.abs(self.value);
	if(self.value.length < 2){
		self.value = pad(self.value, 2, '0');
		return;
	}
	if(self.value.length >= 3){
		self.value = self.value[0]+self.value[1];
		return;
	}
	if(self.value > 23){
		self.value = 23;
		return;
	}
}

function m_check(self){
	self.value = Math.abs(self.value);
	if(self.value.length < 2){
		self.value = pad(self.value, 2, '0');
		return;
	}
	if(self.value.length >= 3){
		self.value = self.value[0]+self.value[1];
		return;
	}
	if(self.value > 59 || self.value.length >= 3){
		self.value = 59;
		return;
	}
}
// init scheduler
init();

</script>

</html>
